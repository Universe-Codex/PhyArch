<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="theme-color" content="#0f0f12" />
  <meta name="description" content="The ultimate futuristic science hub for 3D rendering, simulations, AI creation, and data analysis." />
  <title>PhyArch NEXUS ‚Äî MasterAppBuilder</title>

  <!-- Manifest -->
  <link rel="manifest" href="manifest.json" />

  <!-- Icons (replace with real ones later) -->
  <link rel="icon" href="https://via.placeholder.com/32/3b82f6/ffffff?text=N" />
  <link rel="apple-touch-icon" href="https://via.placeholder.com/180/3b82f6/ffffff?text=N" />

  <!-- Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" />

  <!-- Three.js -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.168.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.168.0/examples/js/controls/OrbitControls.min.js"></script>

  <style>
    :root {
      --bg: #0f0f12;
      --surface: #1a1a20;
      --elevated: #22222a;
      --text: #f0f4f8;
      --dim: #8a8f99;
      --accent: #3b82f6;
      --border: #2a2a35;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', system-ui, sans-serif;
      height: 100vh;
      display: flex;
      overflow: hidden;
      -webkit-font-smoothing: antialiased;
    }

    #sidebar {
      width: 240px;
      background: var(--surface);
      border-right: 1px solid var(--border);
      padding: 24px;
      overflow-y: auto;
      flex-shrink: 0;
    }
    .logo {
      font-size: 24px;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 32px;
    }
    .sidebar-group h4 {
      font-size: 12px;
      color: var(--dim);
      text-transform: uppercase;
      margin-bottom: 12px;
    }
    .sidebar-item {
      display: flex;
      align-items: center;
      padding: 10px 16px;
      color: var(--dim);
      text-decoration: none;
      font-weight: 500;
      border-radius: 8px;
      transition: all 0.2s;
    }
    .sidebar-item:hover,
    .sidebar-item.active {
      background: var(--elevated);
      color: var(--text);
    }

    #main {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    #topbar {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 12px 24px;
      display: flex;
      align-items: center;
      gap: 16px;
      flex-shrink: 0;
    }
    .topbar-logo {
      font-size: 20px;
      font-weight: 700;
      color: var(--accent);
    }
    .topbar-search {
      flex: 1;
      background: var(--elevated);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 10px 16px;
      color: var(--text);
      font-size: 14px;
      outline: none;
    }
    .topbar-button {
      padding: 8px 16px;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    #content {
      flex: 1;
      overflow-y: auto;
      padding: 24px;
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }
    .dashboard-card {
      background: var(--elevated);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    .dashboard-card h3 {
      font-size: 18px;
      margin-bottom: 12px;
    }

    #viewport {
      height: 500px;
      background: var(--elevated);
      border: 1px solid var(--border);
      border-radius: 12px;
      margin-bottom: 24px;
      position: relative;
    }

    #bottom-bar {
      background: var(--surface);
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-around;
      padding: 12px 0;
      flex-shrink: 0;
    }
    .bar-icon {
      font-size: 24px;
      color: var(--dim);
      cursor: pointer;
      transition: all 0.2s;
    }
    .bar-icon.active,
    .bar-icon:hover {
      color: var(--accent);
    }
    #ai-center {
      background: var(--accent);
      color: white;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: -28px;
      box-shadow: 0 4px 12px rgba(59,130,246,0.4);
    }

    #ai-panel {
      background: var(--elevated);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      margin-top: 24px;
    }
    #ai-input {
      width: 100%;
      background: transparent;
      border: none;
      color: var(--text);
      font-family: monospace;
      font-size: 16px;
      outline: none;
      margin-bottom: 12px;
    }
  </style>
</head>
<body>

  <!-- Sidebar Navigation -->
  <div id="sidebar">
    <div class="logo">NEXUS</div>

    <div class="sidebar-group">
      <h4>Tools</h4>
      <a href="#" class="sidebar-item active"><span class="sidebar-icon">üè†</span> Dashboard</a>
      <a href="#" class="sidebar-item"><span class="sidebar-icon">üõ†Ô∏è</span> Create App</a>
      <a href="#" class="sidebar-item"><span class="sidebar-icon">üî¨</span> Simulate</a>
      <a href="#" class="sidebar-item"><span class="sidebar-icon">üßÆ</span> Calculate</a>
      <a href="#" class="sidebar-item"><span class="sidebar-icon">üìä</span> Analyze</a>
    </div>

    <div class="sidebar-group">
      <h4>File</h4>
      <a href="#" class="sidebar-item"><span class="sidebar-icon">üìÇ</span> Files</a>
      <a href="#" class="sidebar-item"><span class="sidebar-icon">üíæ</span> Save</a>
      <a href="#" class="sidebar-item"><span class="sidebar-icon">‚ûï</span> Insert</a>
    </div>

    <div class="sidebar-group">
      <h4>System</h4>
      <a href="#" class="sidebar-item"><span class="sidebar-icon">‚öôÔ∏è</span> Settings</a>
    </div>
  </div>

  <!-- Main Area -->
  <div id="main">
    <!-- Top Bar -->
    <div id="topbar">
      <div class="topbar-logo">PhyArch NEXUS</div>
      <input type="text" class="topbar-search" placeholder="Search or AI prompt..." />
      <button class="topbar-button">Update</button>
    </div>

    <!-- Content -->
    <div id="content">
      <!-- Dashboard Grid -->
      <div class="dashboard-grid">
        <div class="dashboard-card">
          <h3>System Status</h3>
          <p>Stable ‚Ä¢ 100% Sync</p>
        </div>
        <div class="dashboard-card">
          <h3>Projected Achievements</h3>
          <p>Simulation Master: 40% complete</p>
        </div>
      </div>

      <!-- 3D Viewport -->
      <div id="viewport"></div>

      <!-- AI Forge Panel -->
      <div id="ai-panel">
        <h3>AI Forge</h3>
        <input type="text" id="ai-input" placeholder="Ask anything..." />
        <button onclick="processAI()">Generate</button>
        <div id="ai-output" style="margin-top:12px; color:var(--dim); font-family:monospace;"></div>
      </div>
    </div>

    <!-- Bottom Navigation Bar (X-like) -->
    <div id="bottom-bar">
      <span class="bar-icon">üè†</span>
      <span class="bar-icon">üîç</span>
      <span id="ai-center">üß†</span>
      <span class="bar-icon">üîî</span>
      <span class="bar-icon">üë§</span>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // 3D Viewport with Three.js
    let scene, camera, renderer, controls;
    function init3D() {
      const vp = document.getElementById('viewport');
      scene = new THREE.Scene();
      scene.background = new THREE.Color(0x111116);
      camera = new THREE.PerspectiveCamera(75, vp.clientWidth / vp.clientHeight, 0.1, 1000);
      renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(vp.clientWidth, vp.clientHeight);
      vp.appendChild(renderer.domElement);

      controls = new THREE.OrbitControls(camera, renderer.domElement);
      camera.position.set(0, 2, 5);
      controls.update();

      // Simple scene: grid + cube
      const grid = new THREE.GridHelper(10, 10, 0x3b82f6, 0x22222a);
      scene.add(grid);

      const geometry = new THREE.BoxGeometry(1, 1, 1);
      const material = new THREE.MeshBasicMaterial({ color: 0x3b82f6 });
      const cube = new THREE.Mesh(geometry, material);
      scene.add(cube);

      function animate() {
        requestAnimationFrame(animate);
        cube.rotation.x += 0.01;
        cube.rotation.y += 0.01;
        renderer.render(scene, camera);
      }
      animate();
    }

    // AI Forge (simulated)
    function processAI() {
      const prompt = document.getElementById('ai-input').value;
      document.getElementById('ai-output').innerText = `Generated response for: "${prompt}"\n(simulated ‚Äî ready for real LLM integration)`;
      document.getElementById('ai-input').value = '';
    }

    // Init on load
    window.onload = init3D;
    window.onresize = () => {
      if (renderer) {
        renderer.setSize(viewport.clientWidth, viewport.clientHeight);
        camera.aspect = viewport.clientWidth / viewport.clientHeight;
        camera.updateProjectionMatrix();
      }
    };
  </script>

  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('Service Worker registered'))
          .catch(err => console.log('Service Worker failed:', err));
      });
    }
  </script>
</body>
</html>
